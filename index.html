<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gato Bailar√≠n ‚Äì Demo TikTok (UI Pro + Reload + Typing suave)</title>
  <style>
    :root{--bg:#0b0f14;--panel:#0a0e13;--edge:#1f242c;--fg:#e6edf3;--muted:#8b949e;--brand:#67e8f9;--accent:#a78bfa}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
    .screen{position:fixed;inset:0;display:grid;place-items:center}

   
    .editor{
      width:min(980px,92vw);height:min(560px,74vh);background:linear-gradient(180deg,#0b1016, #090d12);
      border:1px solid var(--edge);border-radius:16px;box-shadow:0 12px 40px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.02);
      display:grid;grid-template-rows:auto 1fr auto;overflow:hidden
    }
    .titlebar{display:flex;align-items:center;gap:10px;padding:10px 14px;background:#0f141a;border-bottom:1px solid #141a21}
    .dot{width:12px;height:12px;border-radius:50%}
    .dot.red{background:#ff5f56}.dot.yellow{background:#ffbd2e}.dot.green{background:#27c93f}
    .filename{margin-left:6px;color:var(--muted)}
    .badge{margin-left:auto;padding:4px 8px;border:1px solid #1e2632;border-radius:999px;color:#9fb3c8;font-size:12px;background:#0a1220}
    .code{padding:16px 18px;font-size:14px;line-height:1.6;white-space:pre-wrap;overflow:auto;border-bottom:1px solid #141a21}
    .caret{display:inline-block;width:8px;height:1.2em;background:linear-gradient(180deg,var(--brand),var(--accent));vertical-align:-2px;border-radius:2px;animation:blink .9s step-end infinite}
    @keyframes blink{50%{opacity:0}}
    .footer{display:flex;gap:12px;align-items:center;justify-content:space-between;padding:10px 14px;color:var(--muted);background:#0d1218}
    .btn{display:inline-flex;align-items:center;gap:8px;background:#0f1725;border:1px solid #1f2937;color:#dbe3ec;padding:8px 14px;border-radius:10px;cursor:pointer;transition:.18s}
    .btn:hover{border-color:#334155;transform:translateY(-1px)}
    .btn.ghost{background:#0b111a;color:#c7cfda}
    .btn .k{opacity:.75;font-size:12px;border:1px solid #273244;padding:2px 6px;border-radius:6px}


    .stage{display:none;place-items:center;text-align:center}
    .stage.active{display:grid}
    .bg-anim{position:fixed;inset:-20%;background:
      radial-gradient(60% 60% at 50% 40%, rgba(167,139,250,.22), transparent 60%),
      radial-gradient(35% 35% at 20% 70%, rgba(110,231,255,.18), transparent 60%),
      radial-gradient(45% 45% at 80% 30%, rgba(34,197,94,.18), transparent 60%),
      #0b0f14;filter:saturate(115%);animation:floatBg 14s ease-in-out infinite alternate;z-index:-2}
    @keyframes floatBg{to{transform:translate3d(0,-2%,0) scale(1.03)}}
    .card{background:rgba(0,0,0,.45);backdrop-filter:blur(8px);border:1px solid #1f2937;border-radius:18px;padding:16px 18px;box-shadow:0 10px 50px rgba(0,0,0,.45);position:relative;z-index:1}
    .gif{width:min(360px,80vw);border-radius:14px;display:block;margin:auto;transform-origin:center;animation:pulse 1.6s ease-in-out infinite}
    @keyframes pulse{50%{transform:scale(1.035)}}
    .gif.snap{animation:snapPulse .45s ease}
    @keyframes snapPulse{0%{transform:scale(1)}35%{transform:scale(1.06)}100%{transform:scale(1)}}

    .controls{display:flex;gap:10px;justify-content:center;margin-top:12px;flex-wrap:wrap}
    .pill{border:1px solid #263142;background:#111827;color:#d1d5db;border-radius:999px;padding:8px 14px;cursor:pointer;transition:.18s}
    .pill:hover{border-color:#3b485a;transform:translateY(-1px)}
    .pill.on{box-shadow:0 0 0 2px #3b485a inset}
    .caption{margin-top:10px;color:#e5e7eb;font-weight:700;font-size:18px;letter-spacing:.2px;opacity:1;transition:opacity .35s ease}
    .caption.fade{opacity:0}

    canvas#confetti{position:fixed;inset:0;pointer-events:none;z-index:0}

    #lights{position:fixed;inset:0;pointer-events:none;opacity:0;transition:opacity .2s ease;z-index:0;
      background:
        radial-gradient(600px 600px at 20% 30%, hsl(200 90% 55%), transparent 60%),
        radial-gradient(600px 600px at 80% 20%, hsl(300 90% 55%), transparent 60%),
        radial-gradient(700px 700px at 50% 80%, hsl(120 90% 55%), transparent 60%),
        radial-gradient(700px 700px at 50% 80%, hsl(62, 100%, 63%), transparent 60%);
        
      filter:hue-rotate(0deg) saturate(140%) brightness(1.05);
      animation:partyHue 3s linear infinite;
    }
    #lights.on{opacity:.9}
    @keyframes partyHue{to{filter:hue-rotate(360deg) saturate(140%) brightness(1.05)}}

    #flashOverlay{position:fixed;inset:0;background:white;opacity:0;pointer-events:none;z-index:2}
    #flashOverlay.show{animation:flash .3s ease}
    @keyframes flash{0%{opacity:0}10%{opacity:1}100%{opacity:0}}

    .toast{position:fixed;top:14px;left:50%;transform:translateX(-50%);background:#0f172a;border:1px solid #1f2937;color:#e2e8f0;padding:8px 12px;border-radius:10px;box-shadow:0 10px 30px rgba(0,0,0,.4);opacity:0;transition:.25s;z-index:3}
    .toast.show{opacity:1}
    a,a:visited{color:#93c5fd}
  </style>
</head>
<body>
  <div id="toast" class="toast">Consejo: pulsa <b>Ctrl/‚åò + Enter</b> para iniciar</div>


  <section class="screen" id="screen-editor">
    <div class="editor">
      <div class="titlebar">
        <span class="dot red"></span><span class="dot yellow"></span><span class="dot green"></span>
        <span class="filename">main.js</span>
        <span class="badge">demo / preview</span>
      </div>

      <div class="code" id="code"></div>

      <div class="footer">
        <div style="display:flex;gap:10px;align-items:center">
          <button class="btn" id="btnRun">‚ñ∂ npm run dance <span class="k">Ctrl/‚åò+Enter</span></button>
          <button class="btn ghost" id="btnReload">üîÅ</button>
        </div>
        <span class="hint">Tu marca: <b>Taxineto360</b> ¬∑ creadora: <b>Paula</b></span>
      </div>
    </div>
  </section>

  <section class="screen stage" id="screen-stage">
    <div class="bg-anim"></div>
    <canvas id="confetti"></canvas>
    <div id="lights"></div>
    <div id="flashOverlay"></div>
    <div class="card">
      <img id="catGif" class="gif" alt="Gato bailando" src="./cat-dance-dancing-cat.gif" />
      <div class="controls">
        <button class="pill" id="party">üéâ Party Mode</button>
        <button class="pill" id="flash">‚ö° Flash</button>
        <button class="pill" id="back">‚Ü© Volver</button>
      </div>
      <div id="captionText" class="caption"></div>
    </div>
  </section>

  <script id="logic" type="text/plain">
const toast=(m,s=1600)=>{const t=document.getElementById("toast");t.innerHTML=m;t.classList.add("show");setTimeout(()=>t.classList.remove("show"),s)};
const goShow=()=>{document.getElementById("screen-editor").style.display="none";document.getElementById("screen-stage").classList.add("active");toast("Show iniciado. ¬°Graba la pantalla!");startCaptions();rainMoney(160)};
document.getElementById("btnRun").onclick=goShow;
window.addEventListener("keydown",e=>{if((e.ctrlKey||e.metaKey)&&e.key==="Enter"){goShow()}});
const CAPTIONS=["‚ú® Cuando compilas sin errores","üòé Commit perfecto y a bailar","üß™ Si funciona, no lo toques","üêû El bug huyendo de m√≠","üöÄ Hoy se deploya bailando","üí° Idea loca ‚Üí feature nueva","üò∫ Gato aprobado por QA","üõ†Ô∏è Refactor que da gustito"];
const captionEl=document.getElementById("captionText");let captionTimer=null,captionIdx=0;
function showCaption(text){captionEl.classList.add("fade");setTimeout(()=>{captionEl.textContent=text;captionEl.classList.remove("fade")},220)}
function startCaptions(){if(captionTimer)clearInterval(captionTimer);showCaption(CAPTIONS[captionIdx%CAPTIONS.length]);captionIdx++;captionTimer=setInterval(()=>{showCaption(CAPTIONS[captionIdx%CAPTIONS.length]);captionIdx++},3400)}
function stopCaptions(){if(captionTimer){clearInterval(captionTimer);captionTimer=null}}
const lights=document.getElementById("lights");let partyInterval=null;
document.getElementById("party").onclick=()=>{const btn=document.getElementById("party");if(partyInterval){clearInterval(partyInterval);partyInterval=null;lights.classList.remove("on");btn.classList.remove("on");toast("Party OFF");document.getElementById("catGif").style.animationDuration="1.6s";return}toast("Party ON üí∏");lights.classList.add("on");btn.classList.add("on");partyInterval=setInterval(()=>rainMoney(60),900);document.getElementById("catGif").style.animationDuration="1.1s"};
const flashOverlay=document.getElementById("flashOverlay");
document.getElementById("flash").onclick=()=>{flashOverlay.classList.remove("show");void flashOverlay.offsetWidth;flashOverlay.classList.add("show");const g=document.getElementById("catGif");g.classList.remove("snap");void g.offsetWidth;g.classList.add("snap")};
document.getElementById("back").onclick=()=>{stopCaptions();document.getElementById("screen-stage").classList.remove("active");document.getElementById("screen-editor").style.display="grid"};
const canvas=document.getElementById("confetti"),ctx=canvas.getContext("2d");let W=canvas.width=innerWidth,H=canvas.height=innerHeight;addEventListener("resize",()=>{W=canvas.width=innerWidth;H=canvas.height=innerHeight});
const EMOJIS=["üíµ","üí∂","üí∏","ü™ô","üò∫","ü§ë"],POOL=[],ACTIVE=[];const MAX_PARTICLES=180;
const SPRITES=new Map();
function getSprite(emo,size){const key=emo+"@"+size;if(SPRITES.has(key))return SPRITES.get(key);const c=document.createElement("canvas");const s=Math.max(24,Math.min(size,64));c.width=c.height=s*1.3;const x=c.getContext("2d");x.font=s+"px system-ui, Segoe UI Emoji, Apple Color Emoji, Noto Color Emoji, EmojiOne";x.textAlign="center";x.textBaseline="middle";x.fillText(emo,c.width/2,c.height/2+1);SPRITES.set(key,c);return c}
function spawn(n=60){for(let i=0;i<n;i++){if(ACTIVE.length>=MAX_PARTICLES)break;const p=POOL.pop()||{};p.x=Math.random()*W;p.y=-10;p.v=(Math.random()*1.4+1.1);p.wobble=Math.random()*2.2;p.rot=Math.random()*6.283;p.size=(Math.floor(Math.random()*16)+26);p.emo=EMOJIS[Math.floor(Math.random()*EMOJIS.length)];p.sprite=getSprite(p.emo,p.size);ACTIVE.push(p)}}
function rainMoney(n=60){spawn(n)}
let last=performance.now();
function tick(now){const dt=Math.min(32,now-last);last=now;ctx.clearRect(0,0,W,H);for(let i=ACTIVE.length-1;i>=0;i--){const f=ACTIVE[i];f.y+=f.v*dt*0.06;f.x+=Math.sin(f.y*0.025+f.wobble)*0.9;ctx.save();ctx.translate(f.x,f.y);ctx.drawImage(f.sprite,-f.sprite.width/2,-f.sprite.height/2);ctx.restore();if(f.y>H+60){POOL.push(ACTIVE.splice(i,1)[0])}}requestAnimationFrame(tick)}
requestAnimationFrame(tick);
  </script>

  <script>
    const codeEl = document.getElementById('code');
    const raw = document.getElementById('logic').textContent.trim();
    const esc = s => s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
    const text = esc(raw);

    let idx = 0;
    let typingTimer = null;
    const CHUNK = 8;        
    const LINE_DELAY = 55;     
    const CHAR_DELAY = 18;   
    const JITTER = 10;       

    function typeStep(){
      codeEl.innerHTML = codeEl.innerHTML.replace(/<span class="caret"><\/span>$/,'');
      if(idx < text.length){
        const next = text.slice(idx, idx += CHUNK);
        codeEl.innerHTML += next + '<span class="caret"></span>';
        codeEl.scrollTop = codeEl.scrollHeight;
        const lastChar = next[next.length-1] || '';
        const base = lastChar === '\n' ? LINE_DELAY : CHAR_DELAY;
        typingTimer = setTimeout(typeStep, base + Math.random()*JITTER);
      } else {
        typingTimer = null;
      }
    }
    function startTyping(fromZero=true){
      if(typingTimer) clearTimeout(typingTimer);
      idx = fromZero ? 0 : idx;
      codeEl.innerHTML = '<span class="caret"></span>';
      typingTimer = setTimeout(typeStep, 80);
    }
    startTyping(true);

    document.getElementById('btnReload').onclick = ()=>{
      startTyping(true);
      const t=document.getElementById('toast'); t.innerHTML='C√≥digo reiniciado'; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'), 900);
    };
    try { eval(raw); }
    catch (e) {
      console.error(e);
      const t=document.getElementById('toast');
      t.innerHTML='Error en la l√≥gica (consola)'; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'), 2200);
    }
  </script>
</body>
</html>
